<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ePortal | Documentation</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="icon" href="/favicon.ico">
    <script src="https://www.googletagmanager.com/gtag/js?id=G-RSVSWSBDSK" async="async"></script>
    <meta name="description" content="KernelCare Enterprise includes a web management console (ePortal)
for protected environments.">
    <meta name="image" content="/images/eportalLDAPusers.png">
    <meta name="twitter:title" content="ePortal">
    <meta name="twitter:description" content="KernelCare Enterprise includes a web management console (ePortal)
for protected environments.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/images/eportalLDAPusers.png">
    <meta name="twitter:url" content="/eportal/">
    <meta property="og:type" content="article">
    <meta property="og:title" content="ePortal">
    <meta property="og:description" content="KernelCare Enterprise includes a web management console (ePortal)
for protected environments.">
    <meta property="og:image" content="/images/eportalLDAPusers.png">
    <meta property="og:url" content="/eportal/">
    <meta property="og:site_name" content="TuxCare Documentation">
    <meta itemprop="name" content="ePortal">
    <meta itemprop="description" content="KernelCare Enterprise includes a web management console (ePortal)
for protected environments.">
    <meta itemprop="image" content="/images/eportalLDAPusers.png">
    <link rel="preload" href="/assets/css/0.styles.b24b4b87.css" as="style"><link rel="preload" href="/assets/js/app.d2c5b853.js" as="script"><link rel="preload" href="/assets/js/4.2286118f.js" as="script"><link rel="preload" href="/assets/js/1.4f2b9708.js" as="script"><link rel="preload" href="/assets/js/23.2a51fbe9.js" as="script"><link rel="prefetch" href="/assets/js/10.b4835eea.js"><link rel="prefetch" href="/assets/js/11.05641949.js"><link rel="prefetch" href="/assets/js/12.55d9db4f.js"><link rel="prefetch" href="/assets/js/13.0ff04be4.js"><link rel="prefetch" href="/assets/js/14.36b6430f.js"><link rel="prefetch" href="/assets/js/15.bf3e5537.js"><link rel="prefetch" href="/assets/js/16.fa44dca2.js"><link rel="prefetch" href="/assets/js/17.d76635c6.js"><link rel="prefetch" href="/assets/js/18.cf78fd83.js"><link rel="prefetch" href="/assets/js/19.726ed123.js"><link rel="prefetch" href="/assets/js/20.06d0bab5.js"><link rel="prefetch" href="/assets/js/21.ece84de1.js"><link rel="prefetch" href="/assets/js/22.31e47a32.js"><link rel="prefetch" href="/assets/js/24.971dfd10.js"><link rel="prefetch" href="/assets/js/25.c6579ba9.js"><link rel="prefetch" href="/assets/js/26.ea44b6d7.js"><link rel="prefetch" href="/assets/js/27.8372bc7a.js"><link rel="prefetch" href="/assets/js/28.7aa3f2ac.js"><link rel="prefetch" href="/assets/js/29.d2e8a2b3.js"><link rel="prefetch" href="/assets/js/5.42a14b04.js"><link rel="prefetch" href="/assets/js/6.4da33694.js"><link rel="prefetch" href="/assets/js/7.d6dbb7da.js"><link rel="prefetch" href="/assets/js/8.e90d9e69.js"><link rel="prefetch" href="/assets/js/9.c595c374.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.b6eac277.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b24b4b87.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tuxcare/" class="home-link"><img src="/logo.svg" alt="Documentation" class="logo"> <span class="site-name site-name--documentation can-hide">Documentation</span></a> <form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <div class="links" style="max-width:nullpx;"><a href="https://cloudlinux.zendesk.com/hc/en-us/requests/new" target="_blank" class="btn">
      Submit Request
    </a> <!----> <a href="https://portal.tuxcare.com" target="_blank" class="btn">
      Login to CLN
    </a> <nav class="nav-links can-hide"></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><div class="sidebar-heading open"><span>Content</span> <!----></div> <ul class="sidebar-group-items"><li><div><a href="/tuxcare/" class="sidebar-link">TuxCare</a></div></li><li><div class="sidebar-header sidebar-link"><div><a href="/live-patching-services/" class="sidebar-link">Live Patching Services</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/live-patching-services/#kernelcare-enterprise" class="sidebar-link">KernelCare Enterprise</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/live-patching-services/#installation" class="sidebar-link">Installation</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#update" class="sidebar-link">Update</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#uninstalling" class="sidebar-link">Uninstalling</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#switching-from-ksplice" class="sidebar-link">Switching from Ksplice</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#basic-management" class="sidebar-link">Basic management</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#command-line-tools" class="sidebar-link">Command line tools</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#config-options" class="sidebar-link">Config options</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#disabling-some-patches" class="sidebar-link">Disabling some patches</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#sticky-patches" class="sidebar-link">Sticky patches</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#scanner-interface" class="sidebar-link">Scanner Interface</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/live-patching-services/#librarycare" class="sidebar-link">LibraryCare</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/live-patching-services/#supported-operating-systems" class="sidebar-link">Supported operating systems</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#installation-and-upgrade" class="sidebar-link">Installation and upgrade</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#usage" class="sidebar-link">Usage</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#troubleshooting" class="sidebar-link">Troubleshooting</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/live-patching-services/#kernelcare-for-iot" class="sidebar-link">KernelCare for IOT</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/live-patching-services/#how-kernelcare-iot-works" class="sidebar-link">How KernelCare IoT works</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/live-patching-services/#qemucare" class="sidebar-link">QEMUCare</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/live-patching-services/#how-qemucare-works" class="sidebar-link">How QEMUCare works</a></div></li><li class="sidebar-sub-header"><div><a href="/live-patching-services/#qemu-patchset-deployment" class="sidebar-link">QEMU PatchSet Deployment</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/live-patching-services/#databasecare" class="sidebar-link">DataBaseCare</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/live-patching-services/#how-databasecare-works" class="sidebar-link">How DataBaseCare works</a></div></li></ul></li></ul></li><li><div class="active collapsed sidebar-header sidebar-link"><div class="active"><a href="/eportal/" class="active sidebar-link">ePortal</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#eportal-hardware-requirements" class="sidebar-link">ePortal Hardware Requirements</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#installation" class="sidebar-link">Installation</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#how-to-adjust-proxy-on-eportal-machine" class="sidebar-link">How to adjust proxy on ePortal machine</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#managing-users" class="sidebar-link">Managing Users</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#authentication-using-ldap" class="sidebar-link">Authentication using LDAP</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#configuration" class="sidebar-link">Configuration</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#login-process" class="sidebar-link">Login process</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#basic-setup-example" class="sidebar-link">Basic setup example</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#filter-setup-example" class="sidebar-link">Filter setup example</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#accessing-eportal" class="sidebar-link">Accessing ePortal</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#patchset-deployment" class="sidebar-link">PatchSet deployment</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#manage-patchset-page" class="sidebar-link">Manage patchset page</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#script-to-automatically-install-latest-patchsets" class="sidebar-link">Script to automatically install latest patchsets</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#script-to-deploy-release-from-a-file" class="sidebar-link">Script to deploy release from a file</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#clean-obsolete-releases" class="sidebar-link">Clean obsolete releases</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#libcare-patchset-deployment" class="sidebar-link">LibCare PatchSet Deployment</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#cli-to-install-the-latest-patchsets" class="sidebar-link">CLI to install the latest patchsets</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#cli-to-deploy-patchset-from-archive" class="sidebar-link">CLI to deploy patchset from archive</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#qemu-patchset-deployment" class="sidebar-link">QEMU PatchSet Deployment</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#cli-to-install-the-latest-patchsets-2" class="sidebar-link">CLI to install the latest patchsets</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#cli-to-deploy-patchset-from-archive-2" class="sidebar-link">CLI to deploy patchset from archive</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#managing-keys" class="sidebar-link">Managing Keys</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#cli-to-manage-keys" class="sidebar-link">CLI to manage keys</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#managing-servers" class="sidebar-link">Managing Servers</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#show-extended-check-in-statistics-in-admin-ui" class="sidebar-link">Show extended check-in statistics in admin UI</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#feed-management" class="sidebar-link">Feed Management</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#cli-to-manage-feeds" class="sidebar-link">CLI to manage feeds</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#adding-extra-tag-field" class="sidebar-link">Adding extra tag field</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#eportal-api" class="sidebar-link">Eportal API</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#get-admin-api-servers" class="sidebar-link">GET /admin/api/servers</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#how-to-setup-eportal-to-use-https" class="sidebar-link">How to setup ePortal to use HTTPS</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#deploying-kernelcare-enterprise" class="sidebar-link">Deploying KernelCare Enterprise</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#kernelcare-enterprise-client-config-file" class="sidebar-link">KernelCare Enterprise client config file</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#deployment-automation" class="sidebar-link">Deployment Automation</a></div></li><li class="sidebar-sub-header"><div><a href="/eportal/#changing-eportal-ip" class="sidebar-link">Changing ePortal IP</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#migrate-eportal" class="sidebar-link">Migrate ePortal</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#configuration-locations" class="sidebar-link">Configuration &amp; locations</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#stopping-starting" class="sidebar-link">Stopping &amp; starting</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#log-files" class="sidebar-link">Log files</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#log-rotation" class="sidebar-link">Log rotation</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#nagios-zabbix-support" class="sidebar-link">Nagios &amp; Zabbix support</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#usage-reports" class="sidebar-link">Usage reports</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#how-to-configure-sendmail-ssmtp" class="sidebar-link">How to configure Sendmail (SSMTP)</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/eportal/#custom-environment-variables" class="sidebar-link">Custom environment variables</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/eportal/#authentication-using-single-sign-on" class="sidebar-link">Authentication using Single Sign On</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/eportal/#configuration-2" class="sidebar-link">Configuration</a></div></li></ul></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/extended-lifecycle-support/" class="sidebar-link">Extended Lifecycle Support</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/extended-lifecycle-support/#centos-6" class="sidebar-link">CentOS 6</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#introduction" class="sidebar-link">Introduction</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#enabling-centos-6-els-repository-if-you-are-not-using-local-mirror" class="sidebar-link">Enabling CentOS 6 ELS repository (if you are not using local mirror)</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#switching-to-use-only-els-mirrors" class="sidebar-link">Switching to use only ELS mirrors</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#how-to-create-centos-6-els-mirror" class="sidebar-link">How to create CentOS 6 ELS mirror</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#outbound-firewall-settings" class="sidebar-link">Outbound firewall settings</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/extended-lifecycle-support/#oracle-linux-6" class="sidebar-link">Oracle Linux 6</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#introduction-2" class="sidebar-link">Introduction</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#installing-oracle-linux-6-els-repository" class="sidebar-link">Installing Oracle Linux 6 ELS repository</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#creating-a-local-oracle-linux-mirror" class="sidebar-link">Creating a local Oracle Linux mirror</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#outbound-firewall-settings-2" class="sidebar-link">Outbound firewall settings</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/extended-lifecycle-support/#ubuntu-16-04-lts" class="sidebar-link">Ubuntu 16.04 LTS</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#introduction-3" class="sidebar-link">Introduction</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#installing-ubuntu-16-04-els-repository" class="sidebar-link">Installing Ubuntu 16.04 ELS repository</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#creating-a-local-ubuntu-mirror" class="sidebar-link">Creating a local Ubuntu mirror</a></div></li><li class="sidebar-sub-header"><div><a href="/extended-lifecycle-support/#outbound-firewall-settings-3" class="sidebar-link">Outbound firewall settings</a></div></li></ul></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/linux-support-services/" class="sidebar-link">Linux Support Services</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/linux-support-services/#essential-support-for-almalinux-os-8" class="sidebar-link">Essential support for AlmaLinux OS 8</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/linux-support-services/#premium-support-for-almalinux-os-8-and-other-linux-distributions" class="sidebar-link">Premium support for AlmaLinux OS 8 and other Linux distributions</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/linux-support-services/#product-nodeos-support-for-almalinux-os-8" class="sidebar-link">Product NodeOS support for AlmaLinux OS 8</a></div></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/tuxcare-cln/" class="sidebar-link">TuxCare CLN</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/tuxcare-cln/#introduction" class="sidebar-link">Introduction</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#create-new-account" class="sidebar-link">Create new account</a></div></li><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#log-in" class="sidebar-link">Log in</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/tuxcare-cln/#dashboard" class="sidebar-link">Dashboard</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#products" class="sidebar-link">Products</a></div></li><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#servers" class="sidebar-link">Servers</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div><a href="/tuxcare-cln/#live-patching-services" class="sidebar-link">Live Patching Services</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/tuxcare-cln/#extended-support-services" class="sidebar-link">Extended Support Services</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#server-license-types" class="sidebar-link">Server License Types</a></div></li><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#activation-keys" class="sidebar-link">Activation Keys</a></div></li><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#servers-2" class="sidebar-link">Servers</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/tuxcare-cln/#billing" class="sidebar-link">Billing</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#balance-and-top-up" class="sidebar-link">Balance and Top up</a></div></li><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#payment-methods" class="sidebar-link">Payment methods</a></div></li><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#invoices" class="sidebar-link">Invoices</a></div></li></ul></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/tuxcare-cln/#settings" class="sidebar-link">Settings</a></div><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#account-details" class="sidebar-link">Account details</a></div></li><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#account-sublogins" class="sidebar-link">Account sublogins</a></div></li><li class="sidebar-sub-header"><div><a href="/tuxcare-cln/#reports" class="sidebar-link">Reports</a></div></li></ul></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="breadcrumb-wrapper page-breadcrumb" data-v-5e0e0acf><span class="breadcrumb-title" data-v-5e0e0acf>Documentation:</span> <a href="/eportal/" class="breadcrumb router-link-exact-active router-link-active" data-v-5e0e0acf>
    ePortal
  </a></div> <div class="page-nav-wrapper"><div class="page-nav"><a href="/live-patching-services/" class="nav-arrow left"></a> <a href="/extended-lifecycle-support/" class="nav-arrow right"></a></div></div> <div class="content content__default"><h1 id="eportal"><a href="#eportal" aria-hidden="true" class="header-anchor">#</a> ePortal</h1> <p>KernelCare Enterprise includes a web management console (ePortal)
for protected environments.</p> <p>ePortal software can help protect servers located behind the
firewall (i.e. with no internet access) and can be installed both
on-premises and in the cloud.</p> <h2 id="eportal-hardware-requirements"><a href="#eportal-hardware-requirements" aria-hidden="true" class="header-anchor">#</a> ePortal Hardware Requirements</h2> <p><strong>Disk</strong></p> <ul><li>100 GB minimum</li> <li>200 GB recommended</li> <li>SSD</li></ul> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>SSD based storage is a crucial requirement for ePortal server.</p></div><p><strong>CPU</strong></p> <p>As far as other requirements concerned, we have tested the following configuration
and the following number of connected servers:</p> <ul><li><p>10k of connected machines is the maximum for the following requirements:</p> <ul><li>VM</li> <li>1 VCPU</li> <li>1 GB RAM</li></ul></li> <li><p>75k of connected machines is the maximum for the following requirements:</p> <ul><li>Core i5</li> <li>1 CPU</li> <li>4 GB RAM</li></ul></li></ul> <h2 id="installation"><a href="#installation" aria-hidden="true" class="header-anchor">#</a> Installation</h2> <p>ePortal is compatible with 64-bit versions of CentOS 7 and 8, AlmaLinux 8.
To install ePortal, start with the minimal image of EL7 or EL8 or AlmaLinux 8.</p> <p>For installation and workability of ePortal the Nginx web server is required.
We recommend to use stable version from the official Nginx repository:</p> <div class="language- extra-class"><pre class="language-text"><code>cat &gt; /etc/yum.repos.d/nginx.repo &lt;&lt;EOL
[nginx]
name=nginx stable repo
baseurl=http://nginx.org/packages/centos/\$releasever/\$basearch/
gpgcheck=1
enabled=1
gpgkey=https://nginx.org/keys/nginx_signing.key
module_hotfixes=true
EOL
</code></pre></div><p>You can find more information at <a href="https://nginx.org/en/linux_packages.html#stable" target="_blank" rel="noopener noreferrer">https://nginx.org/en/linux_packages.html#stable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Setup ePortal repo:</p> <div class="language- extra-class"><pre class="language-text"><code>cat &gt; /etc/yum.repos.d/kcare-eportal.repo &lt;&lt;EOL
[kcare-eportal]
name=KernelCare ePortal
baseurl=https://www.repo.cloudlinux.com/kcare-eportal/\$releasever/\$basearch/
enabled=1
gpgkey=https://repo.cloudlinux.com/kernelcare/RPM-GPG-KEY-KernelCare
gpgcheck=1
EOL
</code></pre></div><p>Install ePortal:</p> <div class="language- extra-class"><pre class="language-text"><code>yum install -y kcare-eportal
</code></pre></div><h2 id="how-to-adjust-proxy-on-eportal-machine"><a href="#how-to-adjust-proxy-on-eportal-machine" aria-hidden="true" class="header-anchor">#</a> How to adjust proxy on ePortal machine</h2> <p>On the ePortal machine, you should define the same proxy settings as you use
in the command line.</p> <p>To do so, add <span class="notranslate"><code>PROXY = 'http://example.com:3128'</code></span>
into <span class="notranslate"><code>/usr/share/kcare-eportal/config/local.py</code></span> file:</p> <div class="notranslate"><div class="language- extra-class"><pre class="language-text"><code>echo -e &quot;\nPROXY = 'http://example.com:3128'&quot; &gt;&gt; /usr/share/kcare-eportal/config/local.py
</code></pre></div></div> <p>Restart ePortal (see <a href="/eportal/#stopping-starting">Stopping &amp; Starting</a>
section, choose a corresponding OS).</p> <h2 id="managing-users"><a href="#managing-users" aria-hidden="true" class="header-anchor">#</a> Managing Users</h2> <p>You can manage portal using <code>kc.eportal</code> utility:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><code>-l</code></td> <td><code>--list-users</code></td> <td>list all users</td></tr> <tr><td><code>-a</code></td> <td><code>--add-user</code></td> <td>add a user</td></tr> <tr><td><code>-d</code></td> <td><code>--delete-user</code></td> <td>delete a user</td></tr> <tr><td><code>-c</code></td> <td><code>--change-password</code></td> <td>change a user password</td></tr> <tr><td><code>-p</code></td> <td><code>--password</code></td> <td>provide a password for a user</td></tr> <tr><td><code>-h</code></td> <td><code>--help</code></td> <td>show this help</td></tr></tbody></table> <p>To add a user:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal -a admin -p AdminPassword
</code></pre></div><p>To change user's password:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal -c admin -p NewPassword
</code></pre></div><p>Set user as read-only:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal -r user
User 'user' is now readonly
</code></pre></div><h2 id="authentication-using-ldap"><a href="#authentication-using-ldap" aria-hidden="true" class="header-anchor">#</a> Authentication using LDAP</h2> <p>ePortal supports LDAP authentication via bind operation. Every user should
have a DN with an ability to perform bind request. ePortal doesn't sync
users so you don't need to set special DN/password to access LDAP server.</p> <h3 id="configuration"><a href="#configuration" aria-hidden="true" class="header-anchor">#</a> Configuration</h3> <p>LDAP configuration settings are available inside <code>Settings / LDAP</code> navigation item.</p> <h4 id="url"><a href="#url" aria-hidden="true" class="header-anchor">#</a> URL</h4> <p>Specifies host, port, and protocol of LDAP server to connect to.</p> <p>Format: <code>&lt;scheme&gt;://&lt;host&gt;[:port][?params]</code>.</p> <ul><li><strong>scheme</strong>:
<ul><li><code>ldap</code>: a verified encrypted TLS connection, you can specify <code>tls=0</code> to use
insecure connection;</li> <li><code>ldaps</code>: an SSL connection;</li></ul></li> <li><strong>host</strong>: hostname or ip of your LDAP server;</li> <li><strong>port</strong>: custom port, by default 389 for <code>ldap</code> and 636 for <code>ldaps</code> scheme;</li> <li><strong>params</strong>:
<ul><li><code>strict_check=0</code>: enable/disable strict SSL certificate verification (enabled by default);</li> <li><code>tls=0</code>: enable/disable TLS handshake on connect (enabled by default);</li> <li><code>timeout=30</code>: LDAP server connection timeout (in seconds, 5 by default).</li></ul></li></ul> <p>For example:</p> <ul><li><code>ldap://ldap.forumsys.com?tls=0&amp;timeout=30</code>: use insecure connection with 30s
connection timeout.</li></ul> <h4 id="connection-string-dn-template"><a href="#connection-string-dn-template" aria-hidden="true" class="header-anchor">#</a> Connection String (DN template)</h4> <p>Connection string is a DN template used in LDAP bind operation. All <code>%s</code>
template placeholders will be replaced with username from login form.</p> <p>For example: <code>uid=%s,dc=example,dc=com</code>.</p> <p>Some LDAP implementations support additional templates for bind requests:</p> <ul><li>Active Directory accepts <code>%s@example.com</code> template;</li> <li><code>cn=%s,dc=example,dc=com</code> or <code>email=%s,dc=example,dc=com</code> can be also valid.</li></ul> <h4 id="filter"><a href="#filter" aria-hidden="true" class="header-anchor">#</a> Filter</h4> <p>Filter is an optional setting which specifies parameters for an additional LDAP
search request to limit users who have access to ePortal. Usually it is a check
of a group user belongs to. If search returns non-empty result user will be
considered authenticated.</p> <p>Format: <code>&lt;base&gt;??&lt;scope&gt;?&lt;filter&gt;</code>, is a part of
<a href="https://tools.ietf.org/html/rfc2255" target="_blank" rel="noopener noreferrer">The LDAP URL Format RFC<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <ul><li><strong>base</strong>: a search base, a root node to perform search from;</li> <li><strong>scope</strong>: a search scope;
<ul><li><code>base</code>: search only for base (default);</li> <li><code>one</code>: search for direct ascendants only (one level deep from base);</li> <li><code>sub</code>: search in whole tree;</li></ul></li> <li><strong>filter</strong>: search filter to apply.</li></ul> <p>For example: <code>dc=example,dc=com??one?(&amp;(ou=mathematicians)(uniqueMember=uid=%s,dc=example,dc=com))</code></p> <p>Take note. You can use <code>%s</code> placeholder in <code>Filter</code> setting as well. It will be
replaced with username from login form.</p> <h3 id="login-process"><a href="#login-process" aria-hidden="true" class="header-anchor">#</a> Login process</h3> <p>When a user logs in to ePortal, ePortal checks the user credentials in the local
database at first. If the credentials are found, the user will be authenticated,
and only if the user credentials are not found, ePortal redirects to LDAP.</p> <p>When you log in to ePortal with your LDAP credentials for the first time,
a user with LDAP username, read-only permissions, and <code>LDAP</code> description
is created in the database by default (<code>https://&lt;eportal&gt;/admin/user/</code>).</p> <p>In the picture, you can see one user created with <code>kc.eportal</code> command line
interface and two users logged in with LDAP credentials.</p> <p><img src="/images/eportalLDAPusers.png" alt=""></p> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>Take note. All fresh LDAP users have read-only permissions. You can set
admin rights on <code>User edit</code> page by turning off <code>Readonly</code> field.</p></div><h3 id="basic-setup-example"><a href="#basic-setup-example" aria-hidden="true" class="header-anchor">#</a> Basic setup example</h3> <p>This and following example are based on public test LDAP server
<a href="https://www.forumsys.com/tutorials/integration-how-to/ldap/online-ldap-test-server/" target="_blank" rel="noopener noreferrer">ldap.forumsys.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Here is a list of our users:</p> <div class="language- extra-class"><pre class="language-text"><code>~$ ldapsearch -H ldap://ldap.forumsys.com -LLL -x -b 'dc=example,dc=com' '(objectClass=person)' dn
dn: uid=tesla,dc=example,dc=com
dn: uid=gauss,dc=example,dc=com
...
</code></pre></div><p>Basic setup only checks if provided username/password can bind to your directory
service. Take note: all fresh users have read-only permission. So you can
safely allow to login into eportal for all LDAP users and set correct
permissions individually.</p> <p>For basic setup you should fill <code>Url</code> and  <code>Connection string</code> settings:</p> <table><thead><tr><th>Setting</th> <th>Value</th></tr></thead> <tbody><tr><td>URL</td> <td>ldap://ldap.forumsys.com?tls=0</td></tr> <tr><td>Connection string</td> <td>uid=%s,dc=example,dc=com</td></tr></tbody></table> <p>After that you can login using <code>gauss:password</code> or <code>tesla:password</code> credentials.</p> <h3 id="filter-setup-example"><a href="#filter-setup-example" aria-hidden="true" class="header-anchor">#</a> Filter setup example</h3> <p>Filter allows to limit a set of users permitted to login into ePortal, for
example users belonging to <code>mathematicians</code> group.</p> <p>Here are our example groups:</p> <div class="language- extra-class"><pre class="language-text"><code>~$ ldapsearch -H ldap://ldap.forumsys.com -LLL -x -b 'dc=example,dc=com' '(objectClass=groupOfUniqueNames)' dn
dn: ou=mathematicians,dc=example,dc=com
dn: ou=scientists,dc=example,dc=com
...
</code></pre></div><p>And <code>mathematicians</code> group attributes:</p> <div class="language- extra-class"><pre class="language-text"><code>~$ ldapsearch -H ldap://ldap.forumsys.com -LLL -x -b 'dc=example,dc=com' '(ou=mathematicians)'
dn: ou=mathematicians,dc=example,dc=com
uniqueMember: uid=euclid,dc=example,dc=com
uniqueMember: uid=riemann,dc=example,dc=com
uniqueMember: uid=euler,dc=example,dc=com
uniqueMember: uid=gauss,dc=example,dc=com
uniqueMember: uid=test,dc=example,dc=com
ou: mathematicians
cn: Mathematicians
objectClass: groupOfUniqueNames
objectClass: top
</code></pre></div><p>ePortal LDAP settings to limit allowed users:</p> <table><thead><tr><th>Setting</th> <th>Value</th></tr></thead> <tbody><tr><td>URL</td> <td>ldap://ldap.forumsys.com?tls=0</td></tr> <tr><td>Filter</td> <td>dc=example,dc=com??one?(&amp;(ou=mathematicians)(uniqueMember=uid=%s,dc=example,dc=com))</td></tr> <tr><td>Connection string</td> <td>uid=%s,dc=example,dc=com</td></tr></tbody></table> <p>Filter idea is to find the <code>mathematicians</code> group which has an attribute
<code>uniqueMember</code> equal to DN of our user who tries to login.</p> <p>After that you can login using <code>gauss:password</code> but not <code>tesla:password</code> credentials.</p> <h2 id="accessing-eportal"><a href="#accessing-eportal" aria-hidden="true" class="header-anchor">#</a> Accessing ePortal</h2> <p>To access KernelCare.eportal management console, connect to:
<strong>http://YOUR_IP/admin</strong></p> <p>And enter your login &amp; password</p> <p><img src="/images/access_eportal.png" alt=""></p> <p>You can manage your login information using <a href="/eportal/#managing-users">kc.eportal tool</a>.</p> <h2 id="patchset-deployment"><a href="#patchset-deployment" aria-hidden="true" class="header-anchor">#</a> PatchSet deployment</h2> <p>ePortal has built-in mechanism to download latest patches. To start
using it, click <em>Settings</em> link in ePortal navigational bar and
then click <em>Patch Source</em>. To get access, please contact
<a href="mailto:sales@tuxcare.com">sales@tuxcare.com</a> and request your ePortal
access credentials.</p> <p><img src="/images/eportal-edit-patch-source.png" alt=""></p> <p>You can choose only a limited set of distros to fetch to reduce disk
space and network bandwidth requirements.</p> <p>Once you set up patch source access info, you will get to a list of available patchsets.</p> <p><img src="/images/eportal-dashboard.png" alt=""></p> <ul><li><p><strong>Usage</strong>: amount of servers using particular patchset on any
feed. You can click on the number to see a list of servers using the patchset.</p></li> <li><p><strong>Patchsets</strong>: name of the patchset. Click on a name will show patchset
changelog.</p></li> <li><p><strong>Feed name</strong>: cells show patchset deployment and server usage status on particular feed.
Numbers are also clickable to filter server list.</p></li> <li><p><strong>Manage</strong>: opens dialog to enable/disable the patchset.</p></li></ul> <h3 id="manage-patchset-page"><a href="#manage-patchset-page" aria-hidden="true" class="header-anchor">#</a> Manage patchset page</h3> <p><img src="/images/eportal-manage.png" alt=""></p> <p>In this dialog you can control which patchsets will be enabled/disabled on
corresponding feeds.</p> <ul><li><p><strong>Enable all up to this patchset</strong>: action will enable all patchsets
(excluding <strong>disabled</strong>) up to this patchset.</p></li> <li><p><strong>Enable</strong>: action will enable only current patchset.</p></li> <li><p><strong>Disable</strong>: action will disable only current patchset. Disabled patchsets
are immune to auto-update and mass-enabling via <strong>Enable all up to this patchset</strong>
action.</p></li></ul> <p>To unroll patchset from CLI, run:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal --unroll 16012017_1
</code></pre></div><h3 id="script-to-automatically-install-latest-patchsets"><a href="#script-to-automatically-install-latest-patchsets" aria-hidden="true" class="header-anchor">#</a> Script to automatically install latest patchsets</h3> <p>It determines if latest patches are available and installs them to the <strong>default feed</strong>.</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal --get-latest
</code></pre></div><p>If you need to update other feeds that are marked for auto update instead of
the default one, use a different argument:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal --auto-update
</code></pre></div><p>Note, that the latter command will update only feeds that has <code>Autoupdate</code>
attribute.</p> <h3 id="script-to-deploy-release-from-a-file"><a href="#script-to-deploy-release-from-a-file" aria-hidden="true" class="header-anchor">#</a> Script to deploy release from a file</h3> <p>If you have no opportunity to connect your ePortal server to the KernelCare patch server, you can install it manually:</p> <p>Download the selected patchset to your ePortal server:</p> <div class="language- extra-class"><pre class="language-text"><code>rsync -v 04082020_1.tgz your-eportal:/tmp
</code></pre></div><p>Run the deployment tool with patchset file name as a parameter:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal --deploy /tmp/04082020_1.tgz
</code></pre></div><h3 id="clean-obsolete-releases"><a href="#clean-obsolete-releases" aria-hidden="true" class="header-anchor">#</a> Clean obsolete releases</h3> <p>The list of provided patches is reduced once in a month (old patches that have
newer versions are removed), but resources are not deleted from ePortal machine.
The control of resource deletion is in charge of the ePortal administrator. To
free disk space on ePortal old release resources could be removed.</p> <p>To check what releases will be removed:</p> <div class="language- extra-class"><pre class="language-text"><code>DRY_RUN=1 kc.eportal --clean-releases
</code></pre></div><p>To remove obsolete releases:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal --clean-releases
</code></pre></div><h2 id="libcare-patchset-deployment"><a href="#libcare-patchset-deployment" aria-hidden="true" class="header-anchor">#</a> LibCare PatchSet Deployment</h2> <p>Starting from version 1.18, ePortal supports the LibCare patchset management. It
is accessible from the <code>Patches / LibCare</code> navigation item. LibCare patches
use the same Patch Source credentials, and you don't need to perform additional
configuration.</p> <p><img src="/images/eportal-libcare-feed.png" alt=""></p> <h3 id="cli-to-install-the-latest-patchsets"><a href="#cli-to-install-the-latest-patchsets" aria-hidden="true" class="header-anchor">#</a> CLI to install the latest patchsets</h3> <p>To update the default feed, run the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal libcare update
</code></pre></div><p>To update the <code>test</code> feed, run the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal libcare update --feed test
</code></pre></div><p>To update all auto-feeds, run the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal libcare auto-update
</code></pre></div><h3 id="cli-to-deploy-patchset-from-archive"><a href="#cli-to-deploy-patchset-from-archive" aria-hidden="true" class="header-anchor">#</a> CLI to deploy patchset from archive</h3> <div class="language- extra-class"><pre class="language-text"><code>~$ kc.eportal libcare deploy --help
usage: kc.eportal libcare deploy [-h] [--feed FEED] [--disabled] archive

positional arguments:
  archive      path to archive

optional arguments:
  -h, --help   show this help message and exit
  --feed FEED  feed to deploy archive to
  --disabled   do not enable patchset after deploy
</code></pre></div><p>For example:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal libcare deploy --feed test /tmp/U20210129_02.tar.bz2
</code></pre></div><p>This command will deploy and enable the <code>U20210129_02</code> patchset in to the <code>test</code> feed.</p> <h2 id="qemu-patchset-deployment"><a href="#qemu-patchset-deployment" aria-hidden="true" class="header-anchor">#</a> QEMU PatchSet Deployment</h2> <p>Starting from version 1.25, ePortal supports the QEMU patchset management. It
is accessible from the <code>Patches / QEMUcare</code> navigation item. QEMU patches
use the same Patch Source credentials, and you don't need to perform additional
configuration.</p> <p><img src="/images/eportal-qemu-feed.png" alt=""></p> <h3 id="cli-to-install-the-latest-patchsets-2"><a href="#cli-to-install-the-latest-patchsets-2" aria-hidden="true" class="header-anchor">#</a> CLI to install the latest patchsets</h3> <p>To update the default feed, run the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal qemu update
</code></pre></div><p>To update the <code>test</code> feed, run the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal qemu update --feed test
</code></pre></div><p>To update all auto-feeds, run the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal qemu auto-update
</code></pre></div><h3 id="cli-to-deploy-patchset-from-archive-2"><a href="#cli-to-deploy-patchset-from-archive-2" aria-hidden="true" class="header-anchor">#</a> CLI to deploy patchset from archive</h3> <div class="language- extra-class"><pre class="language-text"><code>~$ kc.eportal qemu deploy --help
usage: kc.eportal qemu deploy [-h] [--feed FEED] [--disabled] archive

positional arguments:
  archive      path to archive

optional arguments:
  -h, --help   show this help message and exit
  --feed FEED  feed to deploy archive to
  --disabled   do not enable patchset after deploy
</code></pre></div><p>For example:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal qemu deploy --feed test /tmp/U20210818_01-qemu.tar.bz2
</code></pre></div><p>This command will deploy and enable the <code>U20210818_01-qemu</code> patchset in to the <code>test</code> feed.</p> <h2 id="managing-keys"><a href="#managing-keys" aria-hidden="true" class="header-anchor">#</a> Managing Keys</h2> <p>To register new servers you need to create a KernelCare key that will be used
for server registration. To go to the list of keys, click the <em>Keys</em> navigation
item.</p> <p><img src="/images/key-menu_zoom70.png" alt=""></p> <ul><li>To edit a key, click <img src="/images/eportal_keys_edit.png" alt="">. The <em>Edit</em> tab opens.</li> <li>To remove a key, click <img src="/images/eportal_keys_remove.png" alt="">. Please note, that
removing the key would remove all servers under that key.</li> <li>Click a key to go to Servers tab with the list of
<a href="/kernelcare-enterprise/#managing-servers">servers registered</a> under that key.
You can also remove servers on that tab.</li></ul> <p>To create a new registration click <em>Create</em> tab.</p> <p><img src="/images/key-creation_zoom70.png" alt=""></p> <p>Fill in the following fields:</p> <ul><li><strong>Key</strong> —  you can provide a key value or leave the field empty, so an
automatically generated key will be used</li> <li><strong>Description</strong> — you can provide a description for the key</li> <li><strong>Server Limit</strong> — the amount of servers that can be registered under that key</li> <li><strong>Feed</strong> — select a specific feed or leave empty.</li></ul> <p>Click <em>Save</em> to add the key. The new registration key will be created and added
to the list. The key itself will be used as a part of the registration command
on an individual server.</p> <p>Click <em>Save and Add Another</em> to save this key and add one more key.</p> <p>Click <em>Save and Continue Editing</em> to add the key and open the key edit tab.</p> <p>Click <em>Cancel</em> to return to the key list tab without adding a new key.</p> <h3 id="cli-to-manage-keys"><a href="#cli-to-manage-keys" aria-hidden="true" class="header-anchor">#</a> CLI to manage keys</h3> <div class="language- extra-class"><pre class="language-text"><code>~$ kc.eportal key --help
usage: kc.eportal key [-h] [-a] [-c] [--note NOTE]
                      [--server-limit SERVER_LIMIT] [--feed FEED]
                      [key]

list available keys by default

positional arguments:
  key                   key name

optional arguments:
  -h, --help            show this help message and exit
  -a                    action: add new key
  -c                    action: change key
  --note NOTE           key description
  --server-limit SERVER_LIMIT
                        maximum number of servers allowed
  --feed FEED           feed to associate key to
</code></pre></div><p>List keys:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal key
</code></pre></div><p>Autogenerate key:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal key -a
</code></pre></div><p>Create key with specified value:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal key -a test
</code></pre></div><p>Set feed to key:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal key -c test --feed test
</code></pre></div><h2 id="managing-servers"><a href="#managing-servers" aria-hidden="true" class="header-anchor">#</a> Managing Servers</h2> <p>You can see servers belonging to the key by clicking on the key itself in the
<a href="/eportal/#managing-keys">Managing Keys</a> interface.</p> <p><img src="/images/server_list_1_zoom70.png" alt=""></p> <p>The screen shows servers registered under the key, their IP, hostname,
effective kernel as well as the time of registration and last check in.</p> <p>To view the list of all servers IDs that are connected to the particular key,
do the following:</p> <ul><li>In the UI go to the page with the list of keys. Then click the particular
key. The list of servers connected to this key will be displayed.</li></ul> <p>To view the list of all servers IDs that are not connected to any key, use the <span class="notranslate"><em>Servers</em></span> button on the navigation bar.</p> <p><img src="/images/eportal-servers.png" alt=""></p> <p>Also you can use CLI to see pairs of key/number of servers run:</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; kc.eportal --list-servers
</code></pre></div><table><thead><tr><th></th> <th></th></tr></thead> <tbody><tr><td>Count</td> <td>Key</td></tr> <tr><td><code>0</code></td> <td><code>2shcolu7Y1x6885Q</code></td></tr> <tr><td><code>2</code></td> <td><code>6J89aS44j6OmTr05</code></td></tr></tbody></table> <h3 id="show-extended-check-in-statistics-in-admin-ui"><a href="#show-extended-check-in-statistics-in-admin-ui" aria-hidden="true" class="header-anchor">#</a> Show extended check-in statistics in admin UI</h3> <p>A new table is added to the starting page. This table displays the following:</p> <ul><li>Total number of servers.</li> <li>Number of servers that checked in for the past 48 hours.</li></ul> <p>The number of servers for each key is listed on the <em>Keys</em> page.</p> <h2 id="feed-management"><a href="#feed-management" aria-hidden="true" class="header-anchor">#</a> Feed Management</h2> <p>Feeds are intended to manage patchsets on the server, and they provide
a possibility to bind a set of patches to a specific key. Possible use cases:
for preliminary testing of patches, for applying updates to groups of
servers with the similar hardware, etc.</p> <p>To get into Feeds Management interface go to Settings → Feeds:</p> <p><img src="/images/feed-button_zoom70.png" alt=""></p> <p>On this page a user can manage the existing feeds: create, delete, edit.</p> <p><img src="/images/feed-menu_zoom70.png" alt=""></p> <p>Available options:</p> <ul><li>Name — a name of a feed.</li> <li>Auto update — enable and disable automatic downloading of patches to this feed.</li> <li>Deploy after X hours — a delay in hours between the moment the patchset is
available for deployment and the moment it is installed to the feed.</li></ul> <p>Every 10 minutes ePortal checks for new patches on the main patch server. If
a new patch is available, it is uploaded to the ePortal server. Note: it is
uploaded but is not deployed. The patch availability time is considered
starting from the moment a new patch appears on the ePortal, and that time is
taken into account in <code>Deploy after X hours</code> option. So, if a user sets <code>Deploy after X hours = 10</code>, the patch will be deployed to the feed 10 hours after it
has been downloaded to the ePortal server.</p> <p>To make the feed auto-update immediately, so new patches are loaded to
the feed immediately after they are available on ePortal, set <code>Deploy after X hours = 0</code>.</p> <p>A special case is a clean installation when ePortal is installed on a new
server (there aren't any downloaded archives with patches and feeds with
deployed patchsets, including default feed). In this case, if a user
creates a new feed and sets Deployed after X hours option right away,
then all patches (from the oldest to the latest available) will be
deployed to the feed after the specified X hours. This is because the
archives are downloaded from scratch and will be considered as “just
appeared on ePortal” — that is, all patches will have the same
appearance time on ePortal from which the option Deploy after X hours
will repel.</p> <p><img src="/images/feedmanagement3_zoom70.png" alt=""></p> <p>On the main ePortal page, a user can set the corresponding key &lt;&gt; feed pair.
This is done in the key creation interface or when editing a key.</p> <p><img src="/images/feedmanagement4_zoom70.png" alt=""></p> <p>By default, a new key is bound to the default feed, alternatively, a user can
choose a desired feed from the drop-down menu.</p> <p><img src="/images/feedmanagement5_01_zoom70.png" alt=""></p> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>When removing a feed all keys attached to this feed will be moved to the
default feed.</p></div><p><img src="/images/feedmanagement6_zoom70.png" alt=""></p> <h3 id="cli-to-manage-feeds"><a href="#cli-to-manage-feeds" aria-hidden="true" class="header-anchor">#</a> CLI to manage feeds</h3> <div class="language- extra-class"><pre class="language-text"><code>~$ kc.eportal feed --help
usage: kc.eportal feed [-h] [-a] [-c] [--auto] [--no-auto]
                       [--deploy-after hours]
                       [feed]

list available feeds by default

positional arguments:
  feed                  feed name

optional arguments:
  -h, --help            show this help message and exit
  -a                    action: add new feed
  -c                    action: change feed
  --auto                update feed automatically
  --no-auto             don't update feed automatically
  --deploy-after hours  deploy after specified hours
</code></pre></div><p>List feeds:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal feed
</code></pre></div><p>Add auto updated feed:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal feed -a test --auto
</code></pre></div><p>Change feed into delayed feed:</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal feed -c test --deploy-after 12
</code></pre></div><h2 id="adding-extra-tag-field"><a href="#adding-extra-tag-field" aria-hidden="true" class="header-anchor">#</a> Adding extra tag field</h2> <p>To add an extra Tag field for the server, run:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --tag command
</code></pre></div><p>where <code>command</code> is a parameter defined by a user. This parameter will be
displayed in UI for the server. User could add multiple tags for each server.
Each tag should be separated with <code>;</code> symbol.</p> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --tag &quot;env:prod;ubuntu&quot;
</code></pre></div><p>This server has two tags : <code>env:prod</code> and <code>ubuntu</code>.</p> <p><code>env:prod</code> is a parameter that has tag name <code>env</code> and the value <code>prod</code>.</p> <p><img src="/images/addingextratagfield_zoom88.png" alt=""></p> <p>To remove all tags from a particular server, run:</p> <div class="language- extra-class"><pre class="language-text"><code>kcarectl --tag &quot;&quot;
</code></pre></div><p>Where <code>&quot;&quot;</code> is a parameter to delete the previously defined tag.</p> <h2 id="eportal-api"><a href="#eportal-api" aria-hidden="true" class="header-anchor">#</a> Eportal API</h2> <h3 id="get-admin-api-servers"><a href="#get-admin-api-servers" aria-hidden="true" class="header-anchor">#</a> GET /admin/api/servers</h3> <p>Filters servers on various criteria, iterate through list and get
server counts.</p> <p><strong>Query string parameters:</strong></p> <ul><li><code>hostname</code>: String, optional. Return servers with a hostname like value. Value can
contain <code>%</code> placeholder to match any string.</li> <li><code>ip</code>: String, optional. Return servers with IP like value. Value can
contain <code>%</code> placeholder to match any string.</li> <li><code>feed</code>: String, optional. Return servers attached to feed. Use <code>main</code>
for default feed.</li> <li><code>key</code>: String, optional. Return servers registered to key.</li> <li><code>registered_age</code>: Integer, optional. Return servers registered more than
<code>registered_age</code> days ago. If <code>registered_age</code> is negative then return
servers registered less or equal -<code>registered_age</code> days ago. For example:
<code>registered_age=-3</code> means to return servers registered 3 or less days ago.</li> <li><code>checkin_age</code>: Integer, optional. Return servers sent check-in more than
<code>checkin_age</code> days ago. For negative values see <code>registered_age</code>.</li> <li><code>updated_age</code>: Integer, optional. Return servers loaded patches more than
<code>updated_age</code> days ago. For negative values see <code>registered_age</code>.</li> <li><code>is_updated</code>: Boolean, optional. If <code>true</code> then return servers updated to latest
available patches. If <code>false</code> return servers without latest patches.</li> <li><code>limit</code>: Integer, optional. Limit result to a specified number of entries. By
default <code>limit</code> is 10.</li> <li><code>offset</code>: Integer, optional. Set result to a specified offset. <code>limit</code> and
<code>offset</code> can be used to iterate through result.</li> <li><code>only_count</code>: Boolean, optional. Return server count only.</li></ul> <p><strong>Response:</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    <span class="token property">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;99c97tz44uKX13b5&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10.51.16.72&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;hostname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;localhost.localdomain&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;some-key&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;feed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;registered&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-04-08 16:43:23.907671&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;checkin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-07-12 17:35:56.065077&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;updated&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-06-01 16:37:03.000000&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;euname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.10.0-1160.25.1.el7&quot;</span><span class="token punctuation">,</span>        <span class="token comment">// effective kernel version</span>
            <span class="token property">&quot;release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.10.0-957.5.1.el7.x86_64&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// installed kernel version</span>
            <span class="token property">&quot;kernel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9647204d2708cad906a75944ee56ac68fc5b5704&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;patch_level&quot;</span><span class="token operator">:</span> <span class="token number">49</span><span class="token punctuation">,</span>
            <span class="token property">&quot;patch_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uptime&quot;</span><span class="token operator">:</span> <span class="token number">6394092</span><span class="token punctuation">,</span>
            <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#1 SMP Fri Feb 1 14:54:57 UTC 2019&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;virt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;kvm&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;kcare_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.44-2&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;distro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CentOS Linux&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;distro_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.6.1810&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;machine&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x86_64&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;processor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x86_64&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="how-to-setup-eportal-to-use-https"><a href="#how-to-setup-eportal-to-use-https" aria-hidden="true" class="header-anchor">#</a> How to setup ePortal to use HTTPS</h2> <p>Some assumptions for a server where e-portal is deployed:</p> <ol><li>A firewall is disabled for 443 port.</li> <li>Private and public keys are downloaded on the server.</li></ol> <ul><li>Edit ssl configuration template according to your certificates:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mv /etc/nginx/eportal.ssl.conf.example /etc/nginx/eportal.ssl.conf
vi /etc/nginx/eportal.ssl.conf
</code></pre></div><ul><li>Include this configuration into the main one:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sed -e '3iinclude eportal.ssl.conf;' -i /etc/nginx/conf.d/eportal.conf
</code></pre></div><ul><li>Restart nginx:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>service nginx restart
</code></pre></div><p>In order to communicate with e-portal, updated to https, you need to modify
KernelCare config files on all the servers if they have IPs hardcoded servers
settings.</p> <p>To do that, update <code>PATCH_SERVER</code> and <code>REGISTRATION_URL</code> environment variables:</p> <div class="language- extra-class"><pre class="language-text"><code>vi /etc/sysconfig/kcare/kcare.conf
</code></pre></div><p>So, after editing your <code>/etc/sysconfig/kcare/kcare.conf</code> should contain updated
<code>PATCH_SERVER</code> and <code>REGISTRATION_URL</code> environment variables like in the example
below:</p> <div class="language- extra-class"><pre class="language-text"><code>PATCH_SERVER=https://eportal_domain_name/
REGISTRATION_URL=https://eportal_domain_name/admin/api/kcare
</code></pre></div><p>The following example demonstrates how to connect new servers to e-portal
configured for https:</p> <div class="language- extra-class"><pre class="language-text"><code>$ export KCARE_PATCH_SERVER=https://eportal_domain_name/
$ export KCARE_REGISTRATION_URL=https://eportal_domain_name/admin/api/kcare
$ export KCARE_MAILTO=admin@mycompany.com
$ curl -s https://repo.cloudlinux.com/kernelcare/kernelcare_install.sh | bash
$ /usr/bin/kcarectl --register key_from_your_eportal
</code></pre></div><h2 id="deploying-kernelcare-enterprise"><a href="#deploying-kernelcare-enterprise" aria-hidden="true" class="header-anchor">#</a> Deploying KernelCare Enterprise</h2> <p>To deploy kernelcare client software to use ePortal, the following environment
variables should be setup prior to RPM install:</p> <table><thead><tr><th></th> <th></th> <th></th></tr></thead> <tbody><tr><td><strong>Environment Variable</strong></td> <td><strong>Value</strong></td> <td><strong>Description</strong></td></tr> <tr><td><code>KCARE_PATCH_SERVER</code></td> <td>http://eportal_ip/</td> <td>URL to a server from which patches will be downloaded</td></tr> <tr><td><code>KCARE_REGISTRATION_URL</code></td> <td>http://eportal_ip/admin/api/kcare</td> <td>URL to ePortal's api</td></tr> <tr><td><code>KCARE_MAILTO [2.5+]</code></td> <td>email@address</td> <td>Email to receive all notifications related to failed KernelCare updates. Used in <code>/etc/cron.d/kcare-cron</code></td></tr></tbody></table> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>$ export KCARE_PATCH_SERVER=http://10.1.10.115/
$ export KCARE_REGISTRATION_URL=http://10.1.10.115/admin/api/kcare
$ export KCARE_MAILTO=admin@mycompany.com
$ curl -s https://repo.cloudlinux.com/kernelcare/kernelcare_install.sh | bash
$ kcarectl --register r72fF838Q47oWigj
</code></pre></div><h3 id="kernelcare-enterprise-client-config-file"><a href="#kernelcare-enterprise-client-config-file" aria-hidden="true" class="header-anchor">#</a> KernelCare Enterprise client config file</h3> <p>KernelCare Enterprise client configuration file is located in
<code>/etc/sysconfig/kcare/kcare.conf</code></p> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>AUTO_UPDATE=True
PATCH_SERVER=http://10.1.10.115/
REGISTRATION_URL=http://10.1.10.115/admin/api/kcare
</code></pre></div><p>If <code>AUTO_UPDATE</code> set to <code>True</code>, KernelCare client will check in every 4 hours,
and try to download and apply latest patches</p> <p><code>PATCH_SERVER</code> - server from which patches will be downloaded</p> <p><code>REGISTRATION_URL</code> - URL used to register/unregister server</p> <h3 id="deployment-automation"><a href="#deployment-automation" aria-hidden="true" class="header-anchor">#</a> Deployment Automation</h3> <p>It is possible to use automation tools like Ansible/Puppet/Chef/Salt to install
and operate KernelCare on a big number of systems.</p> <p>The deployment process includes:</p> <ul><li>downloading and running the KernelCare agent installation script</li> <li>updating <code>/etc/sysconfig/kcare/kcare.conf</code> with ePortal-related entries</li> <li>registering KernelCare agents using an activation key</li></ul> <h4 id="ansible"><a href="#ansible" aria-hidden="true" class="header-anchor">#</a> Ansible</h4> <p>To start the automated deployment, you need to specify the following information:</p> <ul><li><p>ePortal server name (or IP) in the <code>eportal_srv</code> Ansible variable. Other config
file options can be found at <a href="/live-patching-services/#config-options">Config Options</a> and
<a href="/eportal/#kernelcare-client-config-file">KernelCare client config file</a>
(ePortal).</p></li> <li><p>an activation key in the <code>activation_key</code> Ansible variable. Activation keys can
be generated in ePortal as described in
<a href="/eportal/#managing-keys">Managing Keys</a> (ePortal).</p></li></ul> <p>Ansible playbook for deployment phase may look like:</p> <div class="language- extra-class"><pre class="language-text"><code>- hosts: kernelcare
  vars:
    eportal_srv: http://192.168.250.19
    activation_key: 89gRVCp1rY0ZQ053
  tasks:
  - name: Download the installation shell script
    get_url:
      url: &quot;{{ eportal_srv }}/installer&quot;
      dest: /root/kc-install.sh
      mode: '0700'

  - name: Run the installation shell script
    shell: /root/kc-install.sh &gt;&gt; /var/log/kcare_install.log
    environment:
      KCARE_REPO: &quot;{{ eportal_srv }}/repo&quot;

  - name: Update kcare.conf with ePortal configuration
    blockinfile:
      path: /etc/sysconfig/kcare/kcare.conf
      create: yes
      block: |
        PATCH_SERVER={{ eportal_srv }}/
        REGISTRATION_URL={{ eportal_srv }}/admin/api/kcare

  - name: register KernelCare agents
    command: /usr/bin/kcarectl --register {{ activation_key }}
</code></pre></div><p>Ansible playbook file example for KernelCare agent removal:</p> <div class="language- extra-class"><pre class="language-text"><code>- hosts: kernelcare
  tasks:
    - name: unregister KernelCare agents
      command: /usr/bin/kcarectl --unregister
      ignore_errors: yes
      args:
        removes: /usr/bin/kcarectl

    - name: remove kernelcare package
      package:
        name: kernelcare
        state: absent
</code></pre></div><h3 id="changing-eportal-ip"><a href="#changing-eportal-ip" aria-hidden="true" class="header-anchor">#</a> Changing ePortal IP</h3> <p>You can change ePortal IP at any moment, but you need to modify KernelCare Enterprise config files on all the servers if they have IPs hardcoded.</p> <p>To do that, edit: <code>/etc/sysconfig/kcare/kcare.conf</code></p> <p>Change:</p> <div class="language- extra-class"><pre class="language-text"><code>PATCH_SERVER=http://10.1.10.115/
REGISTRATION_URL=http://10.1.10.115/admin/api/kcare
</code></pre></div><p>To point to the right location.</p> <h2 id="migrate-eportal"><a href="#migrate-eportal" aria-hidden="true" class="header-anchor">#</a> Migrate ePortal</h2> <p>Here is a procedure to migrate feed/server/key configuration data from one ePortal
to another. ePortal version on a new host should be &gt;=1.18.</p> <ul><li><p>Stop ePortal on both hosts:</p> <div class="language- extra-class"><pre class="language-text"><code>[old-host ~]# systemctl stop eportal
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>[new-host ~]# systemctl stop eportal
</code></pre></div></li> <li><p>Remove db files on a new host:</p> <div class="language- extra-class"><pre class="language-text"><code>[new-host ~]# rm /usr/share/kcare-eportal/data.sqlite*
</code></pre></div></li> <li><p>Copy <code>/usr/share/kcare-eportal/data.sqlite</code> to a new host.</p></li> <li><p>If you want to preserve same LDAP and Feed Source settings, additionally copy
<code>/usr/share/kcare-eportal/config/config.json</code></p></li> <li><p>Start eportal on both hosts:</p> <div class="language- extra-class"><pre class="language-text"><code>[old-host ~]# systemctl start eportal
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>[new-host ~]# systemctl start eportal
</code></pre></div></li></ul> <h2 id="configuration-locations"><a href="#configuration-locations" aria-hidden="true" class="header-anchor">#</a> Configuration &amp; locations</h2> <p>Web Server (nginx) configuration is located at <code>/etc/nginx/conf.d/eportal.conf</code></p> <p>Database (sqlite) is stored in <code>/usr/share/kcare-eportal/data.sqlite</code>
To reset database:</p> <div class="language- extra-class"><pre class="language-text"><code>$ mv /usr/share/kcare-eportal/data.sqlite /usr/share/kcare-eportal/data.sqlite_backup
$ cd /usr/share/kcare-eportal &amp;&amp; python createdb.py
</code></pre></div><p>Patches are stored in: <code>/usr/share/kcare-eportal/patches</code></p> <h2 id="stopping-starting"><a href="#stopping-starting" aria-hidden="true" class="header-anchor">#</a> Stopping &amp; starting</h2> <p>To stop/start/reload/restart configuration of nginx server:</p> <div class="language- extra-class"><pre class="language-text"><code>$ systemctl stop|start|reload|restart nginx
</code></pre></div><p>To stop/start/restart ePortal (Python):</p> <div class="language- extra-class"><pre class="language-text"><code>$ systemctl stop|start|restart eportal
</code></pre></div><h2 id="log-files"><a href="#log-files" aria-hidden="true" class="header-anchor">#</a> Log files</h2> <p>ePortal log: <code>journalctl -u eportal</code></p> <p>Nginx ePortal access log: <code>/var/log/nginx/access.log</code></p> <p>Nginx error log: <code>/var/log/nginx/error.log</code></p> <h3 id="log-rotation"><a href="#log-rotation" aria-hidden="true" class="header-anchor">#</a> Log rotation</h3> <p>By default there is no predefined parameters for eportal's logs rotation. If you
want to enable it for the files listed above:</p> <ul><li>Install <code>logrotate</code> package</li> <li>Create/edit <code>/etc/logrotate.d/eportal</code> configuration file</li></ul> <p>Example logrotate config:</p> <div class="language- extra-class"><pre class="language-text"><code>/var/log/nginx/kcare-eportal.log {
    daily
    rotate 5 # keep 5 last archives
    missingok # it's ok if there is no such file
    notifempty # do nothing if file is empty
    compress
}
</code></pre></div><h2 id="nagios-zabbix-support"><a href="#nagios-zabbix-support" aria-hidden="true" class="header-anchor">#</a> Nagios &amp; Zabbix support</h2> <p>KernelCare.ePortal since version 1.2 supports server monitoring similar to <a href="/kc-agent-monitoring/#nagios-plugin">Nagios</a> &amp; <a href="/kc-agent-monitoring/#zabbix-template">Zabbix</a> monitoring.</p> <p>You can curl the API directly to receive the information:</p> <div class="language- extra-class"><pre class="language-text"><code>https://yourserver/admin/api/kcare/nagios/KCAREKEY
</code></pre></div><p>or you can use <a href="https://patches.kernelcare.com/downloads/nagios/check_kcare" target="_blank" rel="noopener noreferrer">https://patches.kernelcare.com/downloads/nagios/check_kcare<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> script by modifying KEY_KCARE_NAGIOS_ENDPOINT in it to point to your server (change <a href="https://cln.cloudlinux.com/clweb" target="_blank" rel="noopener noreferrer">https://cln.cloudlinux.com/clweb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (link to old UI) or <a href="https://cln.cloudlinux.com/console/auth/login" target="_blank" rel="noopener noreferrer">https://cln.cloudlinux.com/console/auth/login<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (link to new UI) with <a href="https://yourserver/admin" target="_blank" rel="noopener noreferrer">https://yourserver/admin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ).</p> <div class="tip custom-block"><p class="custom-block-title">Note</p><p>Access using <code>PARTNER_LOGIN/TOKEN</code> is not supported by KernelCare.ePortal.</p></div><h2 id="usage-reports"><a href="#usage-reports" aria-hidden="true" class="header-anchor">#</a> Usage reports</h2> <p>In common case, usage reports are sending automatically but when it's not possible, ePortals will try to send report as an email. That requires configured Sendmail (SSMTP) on the host. You can find a short instruction below.</p> <p>If mail sending attempt fails, ePortal will save the reports in <code>/usr/share/kcare-eportal/reports</code> which should be sent manually.</p> <h3 id="how-to-configure-sendmail-ssmtp"><a href="#how-to-configure-sendmail-ssmtp" aria-hidden="true" class="header-anchor">#</a> How to configure Sendmail (SSMTP)</h3> <p>First of all you need to install <code>ssmtp</code>:</p> <div class="language- extra-class"><pre><code>yum install -y ssmtp
</code></pre></div><p>Edit <code>/etc/ssmtp/ssmtp.conf</code> file in accordance with your SMTP server configuration. Here is a simple config file describing a common way to connect to Gmail accounts:</p> <div class="language- extra-class"><pre><code>root=username@gmail.com
mailhub=smtp.gmail.com:587
hostname=localhost
UseSTARTTLS=YES
AuthUser=username@gmail.com
AuthPass=xxxxxxxxxxxxxxxxxxx
FromLineOverride=YES
TLS_CA_File=/etc/ssl/certs/ca-certificates.crt
</code></pre></div><p>Actual location of a TLS_CA_Files depends on distrib:</p> <div class="language- extra-class"><pre><code>&quot;/etc/ssl/certs/ca-certificates.crt&quot;,                // Debian/Ubuntu/Gentoo etc.
&quot;/etc/pki/tls/certs/ca-bundle.crt&quot;,                  // Fedora/RHEL 6
&quot;/etc/ssl/ca-bundle.pem&quot;,                            // OpenSUSE
&quot;/etc/pki/tls/cacert.pem&quot;,                           // OpenELEC
&quot;/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem&quot;, // CentOS/RHEL 7
</code></pre></div><p>Also you could get if from:</p> <div class="language- extra-class"><pre><code>curl-config --ca
</code></pre></div><p>Now you can test a connection:</p> <div class="language- extra-class"><pre><code>echo -n 'Subject: test\n\nTesting ssmtp' | sendmail -v some-recipient@gmail.com
</code></pre></div><h2 id="custom-environment-variables"><a href="#custom-environment-variables" aria-hidden="true" class="header-anchor">#</a> Custom environment variables</h2> <p>You can define your own environment variables for ePortal process.</p> <p>There is the <code>/usr/share/kcare-eportal/environment</code> folder, which is basically daemon tools compatible envdir.</p> <p>For example, to disable the default https verification you can set the <code>PYTHONHTTPSVERIFY</code> environment variable to <code>0</code> as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>echo 0 &gt; /usr/share/kcare-eportal/environment/PYTHONHTTPSVERIFY`
</code></pre></div><h2 id="authentication-using-single-sign-on"><a href="#authentication-using-single-sign-on" aria-hidden="true" class="header-anchor">#</a> Authentication using Single Sign On</h2> <p>ePortal supports Single Sign On authentication by &quot;OAuth 2.0&quot; standard, &quot;Authorization Code&quot; flow.</p> <h3 id="configuration-2"><a href="#configuration-2" aria-hidden="true" class="header-anchor">#</a> Configuration</h3> <p>To enable SSO you need to configure OAuth2 authentication service provider and ePortal.</p> <h4 id="okta-application-setup-example"><a href="#okta-application-setup-example" aria-hidden="true" class="header-anchor">#</a> Okta Application setup example</h4> <p>You set up your OpenID Connect application inside the Okta Admin Console:</p> <ol><li><p>In the Admin Console, go to <strong>Applications</strong> &gt; <strong>Applications</strong>.</p></li> <li><p>Click <strong>Create App Integration</strong>.</p></li> <li><p>On the Create a new app integration page, select <strong>OIDC - OpenID Connect</strong> for the <strong>Sign-in method</strong> and then select <strong>Web Application</strong> as the <strong>Application type</strong>.</p></li> <li><p>Fill in the <strong>Application Settings</strong>.</p></li></ol> <table><thead><tr><th><strong>Setting</strong></th> <th><strong>Value</strong></th></tr></thead> <tbody><tr><td>Sign-in redirect URI</td> <td>http://eportal_ip/admin/sso/login/callback</td></tr> <tr><td>Sign-out redirect URI</td> <td>http://eportal_ip/admin</td></tr></tbody></table> <ol start="5"><li>Obtain <em>Client ID</em>, <em>Client secret</em>, the full URL to the <code>/authorize</code>, <code>/token</code>, <code>/userinfo</code> endpoints.</li></ol> <h4 id="eportal-setup"><a href="#eportal-setup" aria-hidden="true" class="header-anchor">#</a> ePortal setup</h4> <p>On the ePortal machine, configure SSO settings.</p> <p>Edit <code>/usr/share/kcare-eportal/config/local.py</code> file.</p> <div class="language- extra-class"><pre class="language-text"><code>OIDC_AUTH_URL=&quot;https://dev-61441893.okta.com/oauth2/v1/authorize&quot;
OIDC_TOKEN_URL=&quot;https://dev-61441893.okta.com/oauth2/v1/token&quot;
OIDC_USERINFO_URL=&quot;https://dev-61441893.okta.com/oauth2/v1/userinfo&quot;

OIDC_CLIENT_ID=&quot;0Aa134lzhUKj8jDMo5d7&quot;
OIDC_CLIENT_SECRET=&quot;AoBNuWRLRu2dxIR3Q0btO53N1entmGxBjQqwmjVL&quot;
</code></pre></div><p>Restart ePortal (see <a href="/eportal/#stopping-starting">Stopping &amp; Starting</a>
section, choose a corresponding OS).</p> <p>If all settings configured correctly the new <strong>Sign In with SSO</strong> button has to appear on login page <code>http://eportal_ip/admin/login</code></p> <p><img src="/images/sso_eportal.png" alt=""></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/cloudlinux/tuxcare-doc/edit/dev/docs/eportal/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="back-to-top" data-v-c64d4a1e><a class="nav-arrow top back-to-top__link" data-v-c64d4a1e></a></div> </div> <div class="footer" data-v-671babf6><div data-v-671babf6><a href="https://cloudlinux.com" data-v-671babf6><img src="/assets/img/we-are-cloudlinux.783ed390.svg" alt="We are Cloudlinux" data-v-671babf6></a></div> <div class="footer-company-title" data-v-671babf6>2021. CloudLinux Inc</div> <div data-v-671babf6><div data-v-671babf6><a href="https://tuxcare.com/faq/" target="_blank" data-v-671babf6>FAQ</a></div><div data-v-671babf6><a href="https://cloudlinux.zendesk.com/hc/en-us/requests/new" target="_blank" data-v-671babf6>Contact support</a></div><div data-v-671babf6><a href="https://blog.tuxcare.com/" target="_blank" data-v-671babf6>Blog</a></div></div> <div class="social" data-v-671babf6><span class="footer-social-text" data-v-671babf6>Stay in touch</span> <a href="https://www.facebook.com/TuxCare" target="_blank" data-v-671babf6><img src="/fb.png" class="footer-social-logo" data-v-671babf6></a><a href="https://twitter.com/tux_care" target="_blank" data-v-671babf6><img src="/tw.png" class="footer-social-logo" data-v-671babf6></a><a href="https://www.linkedin.com/showcase/tuxcare" target="_blank" data-v-671babf6><img src="/in.png" class="footer-social-logo" data-v-671babf6></a><a href="https://www.youtube.com/channel/UCr4GTupdSlC33wfwAGk3jsA/%20Fa" target="_blank" data-v-671babf6><img src="/ytube.png" class="footer-social-logo" data-v-671babf6></a></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d2c5b853.js" defer></script><script src="/assets/js/4.2286118f.js" defer></script><script src="/assets/js/1.4f2b9708.js" defer></script><script src="/assets/js/23.2a51fbe9.js" defer></script>
  </body>
</html>
